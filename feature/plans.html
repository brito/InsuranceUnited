<form id=plans>
  <p class=when-ready>Based on the information provided, we found the following plans for you.<br>
  Please review the available plans and make your selection:
  <table class=when-ready>
    <caption><h1> Available Plans </h1></caption>
    <thead>
      <th> Plan
      <th> Type
      <th title="Quality Rating"> Quality
      <th title="Customer Service"> Service
      <th title="Annual Deductible"> Deductible
      <th title="Office copay"> Copay
      <th title="Total Monthly Premium"> Premium
    
    <tr data=plans>
      <td><input type=radio name=plan title="Select plan"> $name
      <td> $planType 
      <td> $qualityRating
      <td> $customerServiceRating
      <td> $annualDeductible
      <td> $officeCoPay
      <td> $premium
  </table>
  
  <button class=when-ready>Enroll</button>
</form>

<!-- mock backup for CORS request below -->
<script src=js/plans.insuranceunited.js></script>
<script>
// fetch plans from remote db
$.ajax ({
    url: 'http://darkgoyle.com/insuranceunited/plans',
    contentType: 'text/plain',
    xhrFields: { withCredentials: true }
  }).always(console.log);

  console.clear();
  $('#plans .when-ready').removeClass('when-ready');
  $('#plans').submit(function(){
    $(this).hide();
    recognize('confirm', 'coming up');
    $.fetch('confirm').insertAfter('#plans');
    return false;
  })
  // finagle plans into table
  .find('[data=plans]')
  /*/ filter 
  .mangle(function(plans){
    recognize(plans, 'there are no plans');
  })*/.interpolate();
</script>